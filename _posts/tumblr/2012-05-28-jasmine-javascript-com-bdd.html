---
layout: post
title: 'Jasmine: Javascript com BDD'
date: '2012-05-28T22:51:00-03:00'
tags:
- desenvolvimento
- não faço a mínima ideia
- javascript
- bdd
- jasmine
tumblr_url: http://neilcarvalho.tumblr.com/post/23970655171/jasmine-javascript-com-bdd
---
<p>Esse é mais um post da série <em>não faço a mínima ideia</em>, onde na verdade faço alguma ideia (ao menos do que se trata) mas nunca parei pra estudar a fundo. Até o final do primeiro parágrafo, não fiz nenhuma espécie de pesquisa ou digitei uma linha de <em>code example</em> com Jasmine. E é assim que é pra ser mesmo.</p>

<p>Jasmine é uma ferramenta de BDD para Javascript. Essa é uma linguagem bem filha da puta e chata quando tudo parece bem, mas absolutamente necessária para qualquer coisa internética mais interativa. Não, não conto com coisas pré-históricas como applets Java ou Flash.</p>

<p>Pra quem é familiar com RSpec, Jasmine é moleza. it, describe, beforeEach, spies, tá tudo lá. Só que com a sintaxe do Javascript, mas beleza, tá perdoado.</p>

<p>Partindo daquele exemplo babaquinha da calculadora ultra simples que soma dois números, começaríamos com o seguinte spec:</p>

<pre><code>describe('Calculator', function(){
  it('sums 1+1', function(){
    var calculator = new Calculator();
    expect(calculator.sum(1,1)).toBe(2);
  });
});
</code></pre>

<p>Que retorna o seguinte erro:</p>

<pre><code>ReferenceError: Can't find variable: Calculator
</code></pre>

<p>Para resolver esse erro, definimos Calculator:</p>

<pre><code>function Calculator() {
}
</code></pre>

<p>Que faz o erro alterar para</p>

<pre><code>TypeError: 'undefined' is not a function (evaluating 'calculator.sum(1,1)')
</code></pre>

<p>Oops, faltou definir sum (com o código mais simples que dá pra fazer):</p>

<pre><code>Calculator.prototype.sum = function(num1, num2) {
  return 2;
}
</code></pre>

<p>Yey!</p>

<pre><code>Passing 1 spec
</code></pre>

<p>Uma <em>cheat sheet</em> bem mais detalhada pode ser vista em <a href="http://pivotal.github.com/jasmine/">http://pivotal.github.com/jasmine/</a></p>
